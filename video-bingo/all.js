class Animations{constructor(t,e,s,a){this.frames=[];for(let s=0;s<e;s++){let e=("0000"+s).slice(-2),a=PIXI.Texture.from(`${t}-${e}.png`);this.frames.push(a)}this.sprite=new PIXI.AnimatedSprite(this.frames),this.setPosition(s,a),this.sprite.alpha=0,this.sprite.animationSpeed=.9,this.sprite.loop=!1}play(t){this.sprite.alpha=1,this.sprite.play(),this.sprite.onComplete=()=>{this.sprite.gotoAndStop(0),this.sprite.alpha=0,t()}}setPosition(t,e){this.sprite.position.set(t,e)}}class Bola{constructor(t,e,s,a,i){let r=("0000"+t).slice(-3);this.sprite=new PIXI.Sprite.from(`${r}.png`),this.sprite.anchor.set(.5),this.sprite.position.set(e,s),this.dados=a,setTimeout((()=>{this.goToPosition()}),i)}goToPosition(){tweenMax.to(this.sprite,.4,{rotation:2*Math.PI}),tweenMax.to(this.sprite,.2,{x:this.dados.x,y:this.dados.y,width:this.dados.width,height:this.dados.height})}}class Btn{constructor(t,e,s){this.sprite=PIXI.Sprite.from(t),this.sprite.anchor.set(.5),this.setPosition(e,s),this.sprite.interactive=!0,this.sprite.buttonMode=!0,this.sprite.on("pointerdown",(()=>this.setTexture(!0))).on("pointerup",(()=>this.setTexture(!1))).on("pointerover",(()=>this.onButtonOver())).on("pointerout",(()=>this.onButtonOut()))}setPosition(t,e){this.sprite.position.set(t,e)}setTexture(t){this.sprite.tint=t?8421504:16777215}onButtonOver(){this.sprite.scale.set(1.03)}onButtonOut(){this.sprite.scale.set(1)}}class BtnPlay extends Btn{constructor(t,e,s){super("btnPlay",e,s),this.app=t,this.state=1,this.sprite.on("pointerdown",(()=>this.setTexture(!0))).on("pointerup",(()=>this.setTexture(!1)))}setTexture(t){let e;e=t?"btnPlayAcao":"btnPlay",this.sprite.texture=PIXI.Texture.from(e)}}class Cartela{constructor(t,e,s){this.app=t,this.sprite=new PIXI.Sprite.from("cartela1"),this.setCelulas()}setPosition(t,e){this.sprite.position.set(t,e)}setCelulas(){Cf.celulas.forEach((t=>{let e=new Celula(t.x,t.y);this.sprite.addChild(e.sprite),this.app.celulas.push(e)}))}}class Celula{constructor(t,e){this.sprite=new PIXI.Sprite.from("cardCelula"),this.sprite.position.set(t,e),this.valor=0,this.number=new TxtNumberCelula(0,48,36),this.sprite.addChild(this.number)}setNumber(t){this.number.text=t,this.valor=t}setSorteada(){this.sprite.texture=PIXI.Texture.from("cardCelulaSorteado"),this.number.style.fill=16777215,tweenMax.to(this.number,.2,{rotation:2*Math.PI,onComplete:()=>{this.number.rotation=0}})}setNormal(){this.sprite.texture=PIXI.Texture.from("cardCelula"),this.number.style.fill=0}}let app,tweenMax=TweenMax;class Game extends PIXI.Application{constructor(t){super(t),this.gameStage=new PIXI.Container,this.stage.addChild(this.gameStage),this.contador=0,this.tempo=100,this.posicaoSorteados=[],this.bolas=[],this.cartelas=[],this.celulas=[],this.valores=[],this.jogando=!1,this.pause=!1,this.timeoutID=null,this.onResize=this.onResize.bind(this)}init(){this.cf=Cf.H,this.backgroundGame=new PIXI.Sprite(PIXI.Texture.from(this.cf.background.image)),this.gameStage.addChild(this.backgroundGame),this.serpentina=PIXI.Sprite.from(this.cf.serpentina.image),this.serpentina.anchor.set(.5),this.gameStage.addChild(this.serpentina),this.extratora=PIXI.Sprite.from("extratora"),this.extratora.anchor.set(.5),this.serpentina.addChild(this.extratora),this.ballsStage=new PIXI.Container,this.serpentina.addChild(this.ballsStage),this.btnPlay=new BtnPlay(app,this.cf.btnPlay.x,this.cf.btnPlay.y),this.gameStage.addChild(this.btnPlay.sprite),this.btnPlay.sprite.on("pointerdown",(()=>{this.jogando?(this.pause=!0,clearTimeout(this.timeoutID)):(this.btnPlay.state=2,this.jogando=!0,this.contador=0,this.clearValores(),this.posicaoSorteados=this.generateRandomNumbersArray(0,59,30),this.sortear())})).on("pointerup",(()=>{this.pause&&(this.pause=!1,this.sortear())})),this.btnAuto=new Btn("btnAuto",this.cf.btnAuto.x,this.cf.btnAuto.y),this.gameStage.addChild(this.btnAuto.sprite),this.btnChangeCards=new Btn("btnChangeCards",this.cf.btnChangeCards.x,this.cf.btnChangeCards.y),this.gameStage.addChild(this.btnChangeCards.sprite),this.btnChangeCards.sprite.on("pointerdown",(()=>{this.jogando||(this.clearValores(),this.cardNumbers=this.generateRandomNumbersArray(1,60,60),this.setCardNumbers())})),this.setCartelas(),console.log(this),this.credito=new TextBox("Créditos","22.00"),this.gameStage.addChild(this.credito.sprite),this.premio=new TextBox("Prêmio","0"),this.gameStage.addChild(this.premio.sprite),this.id=new TextoV("123456789"),this.gameStage.addChild(this.id.sprite),window.addEventListener("resize",this.onResize),this.onResize(),this.cardNumbers=this.generateRandomNumbersArray(1,60,60),this.setCardNumbers()}setCartelas(){this.cf.cartela.forEach(((t,e)=>{this.cartelas.push(new Cartela(app,t.x,t.y)),this.gameStage.addChild(this.cartelas[e].sprite)}))}setCardNumbers(){this.cardNumbers.forEach(((t,e)=>{this.celulas[e].setNumber(t)}))}clearValores(){this.celulas.forEach((t=>{t.setNormal()})),this.ballsStage.removeChildren()}onResize(){let t="v";window.innerWidth/window.innerHeight>1920/1080?(t="h",this.renderer.resize(1920,1080)):this.renderer.resize(1080,1920),this.setPosition(t)}setPosition(t){this.cf="h"==t?Cf.H:Cf.V,this.backgroundGame.texture=PIXI.Texture.from(this.cf.background.image),this.serpentina.position.set(this.cf.serpentina.x,this.cf.serpentina.y),this.extratora.position.set(this.cf.extratora.x,this.cf.extratora.y),this.cartelas.forEach(((t,e)=>{let s=this.cf.cartela[e];t.setPosition(s.x,s.y)})),this.btnPlay.setPosition(this.cf.btnPlay.x,this.cf.btnPlay.y),this.btnAuto.setPosition(this.cf.btnAuto.x,this.cf.btnAuto.y),this.btnChangeCards.setPosition(this.cf.btnChangeCards.x,this.cf.btnChangeCards.y),this.credito.setPosition(this.cf.credito.x,this.cf.credito.y),this.premio.setPosition(this.cf.premio.x,this.cf.premio.y),this.id.setPosition(this.cf.id.x,this.cf.id.y)}sortear(){let t=this.posicaoSorteados[this.contador],e=this.celulas[t];e.setSorteada();let s=e.valor,a=new Bola(s,0,-300,Cf.bolas[this.contador],this.tempo);this.ballsStage.addChild(a.sprite),this.contador<this.posicaoSorteados.length-1?(this.contador++,this.timeoutID=setTimeout((()=>{this.pause||this.sortear()}),this.tempo)):this.jogando=!1}generateRandomNumbersArray(t,e,s){let a=[];for(;a.length<s;){let s=Math.floor(Math.random()*(e-t+1))+t;a.includes(s)||a.push(s)}return a}}"use strict";window.onload=function(){app=new Game({transparent:!1,width:1920,height:1080}),document.body.appendChild(app.view);const t=new TextLoading("0",app.screen.width/2,app.screen.height/2);app.stage.addChild(t),app.loader.baseUrl="assets/tema",app.loader.add("backgroundGameH","background_horizontal.png").add("backgroundGameV","background_vertical.png").add("cartela1","cartelas/001.png").add("cardCelula","cardCelula.png").add("cardCelulaSorteado","cardCelulaSorteado.png").add("serpentina","serpentina.png").add("extratora","extratora.png").add("btnPlay","btnPlay.webp").add("btnPlayAcao","btnPlayAcao.webp").add("btnAuto","btnAuto.png").add("btnAutoAcao","btnAutoAcao.png").add("btnChangeCards","btnChangeCards.png").add("btnChangeCardsAcao","btnChangeCardsAcao.png").add("balls","balls.json").load((function(){t.alpha=0,app.init()})),app.loader.onProgress.add((e=>{t.text=parseInt(e.progress)+"%"})),app.loader.onLoad.add((t=>{}))};class TextLoading extends PIXI.Text{constructor(t,e,s,a){super(t,new PIXI.TextStyle(cfTextLoading)),this.anchor.set(.5),this.id=a,this.x=e,this.y=s}}class TxtNumberCelula extends PIXI.Text{constructor(t,e,s){super(t,new PIXI.TextStyle({fontFamily:"Arial",fill:["#000"],fontSize:50,fontWeight:900,stroke:"#fff",strokeThickness:1})),this.anchor.set(.5),this.x=e,this.y=s}}class TextBox{constructor(t,e){this.sprite=new PIXI.Container;let s={fontFamily:"Arial",fill:["#ffffff"],fontSize:25,fontWeight:700,strokeThickness:10};this.titulo=new PIXI.Text(t.toUpperCase(),s),this.titulo.anchor.set(.5),this.sprite.addChild(this.titulo),this.valor=new PIXI.Text(e.toUpperCase(),s),this.valor.anchor.set(.5),this.valor.position.set(0,35),this.sprite.addChild(this.valor),this.setFontSize(23,40)}setPosition(t,e){this.sprite.position.set(t,e)}setFontSize(t,e){this.titulo.style.fontSize=t,this.valor.style.fontSize=e}}class TextoV{constructor(t){this.sprite=new PIXI.Container;this.sprite.valor=new PIXI.Text(t.toUpperCase(),{align:"center",breakWords:!0,fontFamily:"Arial",fill:["#ffffff"],fontWeight:700,lineJoin:"round",strokeThickness:3,wordWrap:!0,wordWrapWidth:10}),this.sprite.valor.anchor.set(.5),this.sprite.addChild(this.sprite.valor),this.setFontSize(30)}setPosition(t,e){this.sprite.position.set(t,e)}setFontSize(t){this.sprite.valor.style.fontSize=t}}var Network={gameID:"",clientID:"",session:"",token:"",language:"",url:"",setup:function(t){let e=new URL(window.location.href);this.gameID="gameID="+e.searchParams.get("gameID"),this.clientID="clientID="+e.searchParams.get("clientID"),this.session="session="+e.searchParams.get("session"),this.token="token="+e.searchParams.get("token"),this.language="language="+e.searchParams.get("language"),this.url=e.searchParams.get("auth"),this.url=this.url+"index.php?&"+this.gameID+"&"+this.clientID+"&"+this.session+"&"+this.token+"&"+this.language+"&toPHP=app|"+e.searchParams.get("clientID")+"|"+e.searchParams.get("gameID");var s=this.url+"|config";Network.ajax(s),Parser.log(s),Network.userAtivo()},ajax:function(t){app.carregando(1),Parser.log("enviei :"+t);var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(Parser.log("recebi: "+this.responseText),app.carregando(0),Parser.interpretador(this.responseText))},e.open("GET",t,!0),e.send()},userAtivo:function(){if(!JOGANDO||SEMACAO){let e=this.url+"|usuarioativo";var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&Parser.interpretador(this.responseText)},t.open("GET",e,!0),t.send()}setTimeout((function(){Network.userAtivo()}),3e4)}},Parser={tabelaPremiacao:[],tabelaBonusCaldeirao:[],qtdCliquesBonus:0,tbCliques:0,qtdCliques:0,arrayRevelarCasas:[["1,2,3","4,5,6","7,8,9","10,11,12","13,14,15"],["1,4,7,10,13","2,5,8,11,14","3,6,9,12,15"],["3,6,9,12,15","2,5,8,11,14","1,4,7,10,13"],["15,14,13","12,11,10","9,8,7","6,5,4","3,2,1"],["1,4,7,10,13","3,6,9,12,15","14,11,8,5,2"],["3,6,9,12,15","1,4,7,10,13","14,11,8,5,2"]],arrayVelocidadeBruxa:[360,350,346,342,338,334,330],vassourasTotal:0,clicks:0,balanceFinal:0,setBonus:!1,numClique:0,winFinal:0,interpretador:function(t){var e=t,s="";if(""!=e&&null!=e&&e!=s&&(s=e,"!"==(e=e.trim()).substr(0,1)&&"!"==e.substr(e.length-1,e.length)))for(var a=e.substr(1,e.length-1).replace("!",""),i=a.search("@")>-1?a.split("@"):[],r=i.length,o=0;o<r;o++)if(null!=i[o]&&""!=i[o]){var n=i[o].split("|"),h=n[0];t=n[1];this.log("PARSEANDO ACAO "+h+"..."+t),this.action(h,t)}},action:function(t,e){switch(t){case"startfig":e.replace("!","").split(",").forEach(((t,e)=>{app.viraDesenho(t,e+1)}));break;case"datavenda":app.setDatavenda(e);break;case"status":app.setStatus(e);break;case"ticketid":app.setTicketiID(e);break;case"combstart":e=e.split(","),this.tbCliques=e,this.qtdCliques=this.tbCliques.length,app.limpaDados();break;case"tb":this.tabelaPremios(e);break;case"balance":this.balance(e);break;case"balancewin":app.setCreditosWin(!1,e);break;case"balancefwin":app.setBalancefwin(!1,e);break;case"balancef":app.setBalancefwin(!1,e),app.setBalancefwin(!0,e);break;case"win":this.win(e);break;case"combstartbonus":this.tabelaBonusCaldeirao=e.split(","),this.qtdCliquesBonus=0;break;case"msgplaybonus":e=e.split(";"),c3_callFunction("mensagensBonus",[e[0],e[1]]);break;case"winbonus":this.winFinal=e;break;case"timebonus":c3_callFunction("populaTempo",[e]);break;case"vassourabonus":c3_callFunction("populaVassouras",[e]),this.vassourasTotal=e;break;case"msgpayBonus":c3_callFunction("populaMensagem",[e]);break;case"payBonus":break;case"coin":app.setCoin(e);break;case"tryBonus":e="true"==e?1:0,c3_callFunction("poupulaContinuaBonus",[e]);break;case"ini":app.helpInicio(e);break;case"ERRO":app.erro(e);break;case"tab":app.setTab(e);break;case"colorpr":app.setColorPrev(e);break;case"coins":e=e.split(";"),app.setCoins(e);break;case"msg":app.setMsg(e);break;case"nch":app.setNch(e);break;case"nchbonus":app.setNchBonus(e);break;case"mcr":app.setMcr(e);break;case"bns":app.setBns(e);break;case"bnsbonus":app.setBnsBonus(e);break;case"auto":app.fimAutomatico();break;case"bonus":app.setIframe(e);break;case"buylink":app.setIframe(e,!0)}},clicouObjeto:function(t,e){if(this.tbCliques){this.numClique=t;var s=this.tbCliques[this.numClique],a="";if(-1!=s.search(":")){a=s.split(":")[0],app.viraDesenho(a,e);var i=s.split("*")[1].split(";")[0],r=s.split("*")[1].split(";")[1],o=s.split("*")[1].split(";")[2];s.split("*")[1].split(";")[3];if(0!=r&&"0.00"!=r)app.marcaPrevisto(0,a,i);else{var n=s.split("*")[0].split(":")[1];n=n.replace(":",";").split(";"),app.animationWin(i,e);for(var h=0;h<n.length;h++){var l=this.tbCliques[parseInt(n[h]-1)];l=l.split(":")[0],app.marcaCasaAPisca(l,n.length,e,o,i)}app.marcaPrevisto(i,a),setTimeout((function(){Parser.tempoPiscaPremio()}),100)}}else a=s,app.viraDesenho(a,e);this.verificaFim()}},verificaFim:function(){this.numClique>=this.qtdCliques-1&&0==this.setBonus&&this.balance(this.balanceFinal)},mandaJogar:function(t){this.log("chamou jogar"),Network.ajax(Network.url+"|getticket")},mandaBonus:function(){this.log("chamou bonus"),Network.ajax(Network.url+"|getbonus")},mandaAcao:function(){this.log("getacao"),Network.ajax(Network.url+"|getacao")},tabelaPremios:function(t){this.tabelaPremiacao=[],t=t.split("*");for(var e=0;e<t.length;e++){var s=t[e].split("-")[0],a=t[e].split("-")[0],i=t[e].split("-")[1].split(";")[0],r=t[e].split("-")[1].split(";")[1];app.preencheTabela(s,i,a,r)}},balance:function(t){null!=t&&""!=t&&app.setCreditos(t)},win:function(t,e=!1){null!=t&&""!=t&&"0"!=t&&"0,00"!=t&&(this.winRodada=t)},revelarTudo:function(t,e,s=null){s=null==s?Math.floor(Math.random()*Parser.arrayRevelarCasas.length):s,Parser.log("rndRevelar "+s),Parser.log("qtd "+Parser.arrayRevelarCasas[s].length),setTimeout((function(){if(t<Parser.arrayRevelarCasas[s].length){for(var e=Parser.arrayRevelarCasas[s][t].split(","),a=0;a<e.length;a++){var i=e[a];Parser.log(i),app.chamaObj(i)}t++,Parser.revelarTudo(t,"",s)}}),100)},time:null,tempoPiscaPremio:function(){clearTimeout(Parser.time),Parser.time=setTimeout((function(){Parser.tempoPiscaPremio()}),2e3)},log:function(t){}};